amend forgot some pattern refactoring and a change in the way the dictionary is built.



